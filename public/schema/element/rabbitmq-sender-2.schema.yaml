$id: http://qubership.org/schemas/product/qip/element/rabbitmq-sender-2.schema.yaml
$schema: http://json-schema.org/draft-07/schema
type: object
allOf:
  - type: object
    title: Common Entity Properties
    properties:
      id:
        type: string
        title: Identifier
      name:
        type: string
        title: Name
    required:
      - id
      - name
  - type: object
    title: Entity with description
    properties:
      description:
        type: string
        title: Description
title: RabbitMQ Sender
properties:
  type:
    type: string
    const: rabbitmq-sender-2
  properties:
    type: object
    allOf:
      - $id: >-
          http://qubership.org/schemas/product/qip/element/properties/rabbitmq-connection-parameters.schema.yaml
        $schema: http://json-schema.org/draft-07/schema
        type: object
        title: RabbitMQ connection parameters
        properties:
          connectionSourceType:
            title: Connection source type
            enum:
              - maas
              - manual
          exchange:
            type: string
            title: Exchange Name
          routingKey:
            type: string
            title: Routing Key
        if:
          properties:
            connectionSourceType:
              const: maas
        then:
          properties:
            vhostClassifierName:
              type: string
              title: Vhost Classifier Name
            maasClassifierNamespace:
              type: string
              title: Topic Classifier Namespace
              description: >
                MaaS topic classifier namespace. By default used current
                namespace.
          required:
            - vhostClassifierName
        else:
          properties:
            addresses:
              type: string
              title: Addresses
            username:
              type: string
              title: Username
            password:
              type: string
              title: Password
              description: >
                For security purposes, use reference to secured variables when
                entering passwords.
          required:
            - addresses
        required:
          - connectionSourceType
          - exchange
      - $id: >-
          http://qubership.org/schemas/product/qip/element/properties/context-propagation.schema.yaml
        $schema: http://json-schema.org/draft-07/schema
        type: object
        title: Context propagation properties
        properties:
          propagateContext:
            type: boolean
            title: Propagate context
            description: Propagate context to headers before sending message.
            default: true
          overrideContextParams:
            title: Override technical context headers
            description: Propagate props to headers before sending message.
            $id: >-
              http://qubership.org/schemas/product/qip/element/properties/headers.schema.yaml
            $schema: http://json-schema.org/draft-07/schema
            type: object
            patternProperties:
              ^.+$:
                type: string
    properties:
      exchangePattern:
        type: string
        default: InOnly
        title: Exchange Pattern
      vhost:
        type: string
        title: Vhost
