$id: http://qubership.org/schemas/product/qip/element/mapper-2.schema.yaml
$schema: http://json-schema.org/draft-07/schema
type: object
allOf:
  - type: object
    allOf:
      - type: object
        title: Common Entity Properties
        properties:
          id:
            type: string
            title: Identifier
          name:
            type: string
            title: Name
        required:
          - id
          - name
      - type: object
        title: Entity with description
        properties:
          description:
            type: string
            title: Description
      - type: object
        properties:
          swimlaneId:
            type: string
title: Mapper
description: Performs mapping between two entities.
properties:
  type:
    type: string
    const: mapper-2
  properties: &ref_0
    type: object
    properties:
      exportFileExtension:
        type: string
        const: json
      propertiesToExportInSeparateFile:
        type: string
        const: mappingDescription
      propertiesFilename:
        type: string
        title: Mapper resource reference
      throwException:
        type: boolean
        title: Throw exception on transformation failure
        description: Throw exception on transformation failure.
        default: true
      mappingDescription:
        type: object
definitions:
  MapperParameters: *ref_0
  Metadata: &ref_1
    type: object
    title: Metadata
    patternProperties:
      ^.+$:
        type: string
  MetadataAware: &ref_4
    type: object
    title: Object with metadata
    properties:
      metadata: *ref_1
  DataType: &ref_2
    type: object
    oneOf:
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
      - type: object
  TypeDefinition: &ref_3
    type: object
    properties:
      id:
        type: string
      name:
        type: string
      type: *ref_2
    required:
      - id
      - name
      - type
  TypeDefinitionsAware: &ref_5
    type: object
    properties:
      definitions:
        type: array
        items: *ref_3
  NullType:
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        const: null
  StringType:
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        const: string
  IntegerType:
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        const: number
  BooleanType:
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        const: boolean
  ArrayType:
    type: object
    allOf:
      - *ref_4
      - *ref_5
    properties:
      name:
        const: array
      itemType: *ref_2
  ObjectType:
    type: object
    allOf:
      - *ref_4
      - *ref_5
    properties:
      name:
        const: object
      schema: &ref_7
        type: object
        allOf:
          - *ref_4
        properties:
          id:
            type: string
          attributes:
            type: array
            items: &ref_13
              type: object
              allOf:
                - &ref_12
                  type: object
                  allOf:
                    - *ref_4
                  properties:
                    id:
                      type: string
                    name:
                      type: string
                    type: *ref_2
                  required:
                    - id
                    - type
                    - name
              properties:
                defaultValue:
                  type: string
                required:
                  type: boolean
                  default: false
  ReferenceType:
    type: object
    allOf:
      - *ref_4
      - *ref_5
    properties:
      name:
        const: reference
      definitionId:
        type: string
  CompoundType: &ref_6
    type: object
    allOf:
      - *ref_4
      - *ref_5
    properties:
      types:
        type: array
        items: *ref_2
  AllOfType:
    type: object
    allOf:
      - *ref_6
    properties:
      name:
        const: allOf
  AnyOfType:
    type: object
    allOf:
      - *ref_6
    properties:
      name:
        const: anyOf
  OneOfType:
    type: object
    allOf:
      - *ref_6
    properties:
      name:
        const: oneOf
  ObjectSchema: *ref_7
  ConstantReference: &ref_8
    type: object
    allOf:
      - *ref_4
    properties:
      type:
        const: constant
      constantId:
        type: string
  AttributeReference: &ref_9
    type: object
    allOf:
      - *ref_4
    properties:
      type:
        const: attribute
      kind:
        enum:
          - header
          - property
          - body
      path:
        type: array
        title: Path
        items:
          type: string
  MappingActionSource: &ref_10
    type: object
    oneOf:
      - *ref_8
      - *ref_9
  Transformation: &ref_11
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        type: string
        title: Name
      parameters:
        type: array
        title: Parameters
        items:
          type: string
    required:
      - name
  MappingAction: &ref_20
    type: object
    allOf:
      - *ref_4
    title: Mapping action
    properties:
      id:
        type: string
      sources:
        type: array
        title: Sources
        items: *ref_10
      target: *ref_9
      transformation: *ref_11
    required:
      - id
      - sources
      - target
  Element: *ref_12
  Attribute: *ref_13
  GivenValue: &ref_15
    type: object
    allOf:
      - *ref_4
    properties:
      kind:
        const: given
      value:
        type: string
    required:
      - kind
      - value
  ValueGenerator: &ref_14
    type: object
    allOf:
      - *ref_4
    properties:
      name:
        type: string
      parameters:
        type: array
        items:
          type: string
    required:
      - name
  GeneratedValue: &ref_16
    type: object
    allOf:
      - *ref_4
    properties:
      kind:
        const: generated
      generator: *ref_14
    required:
      - kind
      - generator
  ValueSupplier: &ref_17
    type: object
    oneOf:
      - *ref_15
      - *ref_16
  Constant: &ref_19
    type: object
    allOf:
      - *ref_12
    properties:
      valueSupplier: *ref_17
  MessageSchema: &ref_18
    type: object
    allOf:
      - *ref_4
    properties:
      headers:
        type: array
        title: Headers
        items: *ref_13
      properties:
        type: array
        title: Properties
        items: *ref_13
      body:
        oneOf:
          - *ref_2
          - type: 'null'
  MappingDescription:
    type: object
    allOf:
      - *ref_4
    properties:
      source: *ref_18
      target: *ref_18
      constants:
        type: array
        title: Constants
        items: *ref_19
      actions:
        type: array
        title: Actions
        items: *ref_20
required:
  - type
